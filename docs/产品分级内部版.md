## 产品分级（内部版本）

根据开发需求，我们需要指定的产品文件标准包括如下几类

|产品等级|产品名称|不确定要求|
|:------:|:----:|:--------:|
|0级|无效数据标识|无|
|0级|数据评分|无|
|1级|衰减后向散射系数|无|
|1级|距离修正信号|无|
|1级|数据类型（云、气溶胶、洁净或低信噪比）|无|
|1级|云高|无|
|1级|云厚|无|
|1级|云持续时间|无|
|2级|云后向散射系数|有|
|2级|云消光系数|有|
|2级|云退偏比|无|
|2级|云色比|有|
|2级|云雷达比|有|
|2级|云分类|无|
|2级|气溶胶后向散射系数|有|
|2级|气溶胶退偏比|有|
|2级|气溶胶色比|有|
|2级|气溶胶雷达比|有|
|2级|气溶胶分类|无|
|2级|水汽质量混合比|有|
|3级|PM1.0|有|
|3级|PM2.5|有|
|3级|PM10|有|
|3级|粒径谱分布|有|
|3级|数浓度|有|
|3级|质量浓度|有|

### 0级产品

0级产品采用[netCDF][1]文件格式，文件名采用如下命名规则

```txt
xxxxx[站点号]_xxxx[雷达编号]_yyyymmddHHMMSS[时间]_prodL0_vxxx[版本号].nc
```

产品变量包括

|变量名|含义|数据类型|数据种类|单位|缺省值|
|:--:|:---|:--:|:--:|:--:|:--:|
|**longitude**|观测点经度|double|标量|-180 ~ 180|NaN|
|**latitude**|观测点维度|double|标量|-90 ~ 90|NaN|
|**altitude**|观测点海拔|double|标量|米|NaN|
|**elevation_angle**|天顶角|double|0-90 (degree)|数组(time)|90|
|**azimuth_angle**|方位角|double|0-360 (degree)|数组(time)|0|
|**start_time**|开始时间|double|标量|[POSIX时间戳][2]|NaN|
|**stop_time**|结束时间|double|标量|[POSIX时间戳][2]|NaN|
|**time**|每个剖面的起始时间|double|数组|[POSIX时间戳][2]|NaN|
|**height**|每个高度门距雷达的距离|double|数组|米|NaN|
|**channelBit**|每个通道标志字节(00000000，第一位表示弹性，第二位表示拉曼，第三位表示水汽，第四位表示垂直偏振，第五位表示近场，第六位表示转动拉曼)|int8|数组||00000000|
|**rec_wavelength**|接收通道波长|double|数组(channelBit)|NaN|
|**flagInvalidData**|无效数据标志|bool|矩阵(time x height)||false|
|**dataScore**|数据评分|double|矩阵(time x height)|0-100|0|
|**rawSignal**|接收信号|double|矩阵(time x height x channelBit)||NaN|
|**temperature**|通过其他渠道获取的温度场(如再分析数据)|double|矩阵(time x height)|K|NaN|
|**pressure**|通过其他渠道获取的压强场(如再分析数据)|double|矩阵(time x height)|hPa|NaN|
|**shots**|脉冲数|int32|数组(time)||0|
|**measurement_type**|剖面测量种类(0：非正常；1：标定；2：正常)|int8|标量|0|
|**digitizer_mode**|采样模式(0：PMT；1：APD)|int8|数组(channelBit)|0|

文件全局属性包括
|属性名|属性含义|例子|
|:--:|:-------|:--:|
|product_level|产品等级|L0|
|instrument|设备名称|polarization lidar|
|instrument_ID|设备号|0601|
|location|站点名称|Beijing|
|location_ID|站点号|57494|
|data_collector|设备运行人员|Zhang Shan|
|data_collector_email|设备运行人员邮箱|xxx|
|PI|设备负责人员|Zhao Si|
|PI_email|设备负责人员邮箱|xxx|
|processor_name|处理软件名称|xxx|
|processor_version|处理软件版本|1.0|
|instrument_configuration_file|雷达配置文件|xxx.json|
|campaign_configuration_file|观测站配置文件|xxx.json|
|history|处理历史(处理历史需要进行叠加放置，用于保存所有处理历史)||

### 1级产品

1级时空产品采用[netCDF][1]文件格式，文件名采用如下命名规则

```txt
xxxxx[站点号]_xxxx[雷达编号]_yyyymmddHHMMSS[时间]_prodL1_vxxx[版本号].nc
```

产品变量包括

|变量名|含义|数据类型|数据种类|单位|缺省值|
|:--:|:---|:--:|:--:|:--:|:--:|
|**longitude**|观测点经度|double|标量|-180 ~ 180|NaN|
|**latitude**|观测点维度|double|标量|-90 ~ 90|NaN|
|**altitude**|观测点海拔|double|标量|米|NaN|
|**elevation_angle**|天顶角|double|0-90 (degree)|数组(time)|90|
|**azimuth_angle**|方位角|double|0-360 (degree)|数组(time)|0|
|**start_time**|开始时间|double|标量|[POSIX时间戳][2]|NaN|
|**stop_time**|结束时间|double|标量|[POSIX时间戳][2]|NaN|
|**time**|每个剖面起始时间|double|数组|[POSIX时间戳][2]|NaN|
|**height**|每个高度门距雷达的距离|double|数组|米|NaN|
|**shots**|每个剖面对应的累积脉冲数|int32|数组||0|
|**elevation_angle**|天顶角|double|0-90 (degree)|数组(time)|90|
|**azimuth_angle**|方位角|double|0-360 (degree)|数组(time)|0|
|**range_corrected_signal_355nm**|355 nm距离修正信号|double|矩阵(time x height)||NaN|
|**range_corrected_signal_532nm**|532 nm距离修正信号|double|矩阵(time x height)||NaN|
|**range_corrected_signal_1064nm**|1064 nm距离修正信号|double|矩阵(time x height)||NaN|
|**attenuated_backscatter_355nm**|355 nm衰减后向散射系数|double|矩阵(time x height)|m^{-1}*sr^{-1}|NaN|
|**attenuated_backscatter_532nm**|532 nm衰减后向散射系数|double|矩阵(time x height)|m^{-1}*sr^{-1}|NaN|
|**attenuated_backscatter_1064nm**|1064 nm衰减后向散射系数|double|矩阵(time x height)|m^{-1}*sr^{-1}|NaN|
|**feature_mask**|数据类型(0：低信噪比；1：洁净；2：气溶胶；3：云；4：无有效数据)|int8|矩阵(time x height)||4|

文件全局属性包括
|属性名|属性含义|例子|
|:--:|:-------|:--:|
|product_level|产品等级|L1|
|instrument|设备名称|polarization lidar|
|instrument_ID|设备号|0601|
|location|站点名称|Beijing|
|location_ID|站点号|57494|
|data_collector|设备运行人员|Zhang Shan|
|data_collector_email|设备运行人员邮箱|xxx|
|PI|设备负责人员|Zhao Si|
|PI_email|设备负责人员邮箱|xxx|
|processor_name|处理软件名称|xxx|
|processor_version|处理软件版本|1.0|
|instrument_configuration_file|雷达配置文件|xxx.json|
|campaign_configuration_file|观测站配置文件|xxx.json|
|history|处理历史(处理历史需要进行叠加放置，用于保存所有处理历史)||

### 2级产品

2级产品采用[netCDF][1]文件格式，文件名采用如下命名规则

```txt
xxxxx[站点号]_xxxx[雷达编号]_yyyymmddHHMMSS[时间]_prodL2_vxxx[版本号].nc
```

产品变量包括

|变量名|含义|数据类型|数据种类|单位|缺省值|
|:--:|:---|:--:|:--:|:--:|:--:|
|**longitude**|观测点经度|double|标量|-180 ~ 180|NaN|
|**latitude**|观测点维度|double|标量|-90 ~ 90|NaN|
|**altitude**|观测点海拔|double|标量|米|NaN|
|**elevation_angle**|天顶角|double|0-90 (degree)|数组(time)|90|
|**azimuth_angle**|方位角|double|0-360 (degree)|数组(time)|0|
|**start_time**|开始时间|double|标量|[POSIX时间戳][2]|NaN|
|**stop_time**|结束时间|double|标量|[POSIX时间戳][2]|NaN|
|**time**|每个剖面起始时间|double|数组|[POSIX时间戳][2]|NaN|
|**height**|每个高度门距地面的高度|double|数组|米|NaN|
|**shots**|累积脉冲个数|int32|标量||0|
|**vertical_resolution**|有效分辨率|double|标量|米|NaN|
|**cloud_backscatter_coefficient**|云后向散射系数|double|矩阵(time x height)|m^{-1}*sr^{-1}|NaN|
|**cloud_backscatter_coefficient_uncertainty**|云后向散射系数不确定度|double|矩阵(time x height)|m^{-1}*sr^{-1}|NaN|
|**cloud_extinction_coefficient**|云消光系数|double|矩阵(time x height)|m^{-1}|NaN|
|**cloud_extinction_coefficient_uncertainty**|云消光系数不确定度|double|矩阵(time x height)|m^{-1}|NaN|
|**cloud_depolarization_ratio**|云退偏比|double|矩阵(time x height)||NaN|
|**cloud_depolarization_ratio_uncertainty**|云退偏比不确定度|double|矩阵(time x height)||NaN|
|**cloud_color_ratio**|云色比|double|矩阵(time x height)||NaN|
|**cloud_color_ratio_uncertainty**|云色比不确定度|double|矩阵(time x height)||NaN|
|**cloud_phase**|云分类（0：非云；1：液水云；2：过冷水云；3：混合相云；4：冰云）|int8|矩阵(time x height)||0|
|**aerosol_backscatter_coefficient**|气溶胶后向散射系数|double|矩阵(time x height)|m^{-1}*sr^{-1}|NaN|
|**aerosol_backscatter_coefficient_uncertainty**|气溶胶后向散射系数不确定度|double|矩阵(time x height)|m^{-1}*sr^{-1}|NaN|
|**aerosol_extinction_coefficient**|气溶胶消光系数|double|矩阵(time x height)|m^{-1}|NaN|
|**aerosol_extinction_coefficient_uncertainty**|气溶胶消光系数不确定度|double|矩阵(time x height)|m^{-1}|NaN|
|**aerosol_depolarization_ratio**|气溶胶退偏比|double|矩阵(time x height)||NaN|
|**aerosol_depolarization_ratio_uncertainty**|气溶胶退偏比不确定度|double|矩阵(time x height)||NaN|
|**aerosol_color_ratio**|气溶胶色比|double|矩阵(time x height)||NaN|
|**aerosol_color_ratio_unncertainty**|气溶胶色比不确定度|double|矩阵(time x height)||NaN|
|**aerosol_lidar_ratio**|气溶胶雷达比|double|矩阵(time x height)|sr|NaN|
|**aerosol_lidar_ratio_uncertainty**|气溶胶雷达比不确定度|double|矩阵(time x height)|sr|NaN|
|**aerosol_type**|气溶胶分类(0：非确定信息；1：洁净大气；2：人为气溶胶；3：沙尘；4：烟尘；5：海盐)|int8|矩阵(time x height)||0|
|**water_vapor_mixing_ratio**|水汽混合比|double|矩阵(time x height)|g*kg^{-1}|NaN|
|**water_vapor_mixing_ratio_uncertainty**|水汽混合比不确定度|double|矩阵(time x height)|g*kg^{-1}|NaN|
|**temperature**|温度|double|矩阵(time x height)|K|NaN|
|**temperature_uncertainty**|温度不确定度|double|矩阵(time x height)|K|NaN|

文件全局属性包括
|属性名|属性含义|例子|
|:--:|:-------|:--:|
|product_level|产品等级|L2|
|instrument|设备名称|polarization lidar|
|instrument_ID|设备号|0601|
|location|站点名称|Beijing|
|location_ID|站点号|57494|
|data_collector|设备运行人员|Zhang Shan|
|data_collector_email|设备运行人员邮箱|xxx|
|PI|设备负责人员|Zhao Si|
|PI_email|设备负责人员邮箱|xxx|
|processor_name|处理软件名称|xxx|
|processor_version|处理软件版本|1.0|
|instrument_configuration_file|雷达配置文件|xxx.json|
|campaign_configuration_file|观测站配置文件|xxx.json|
|history|处理历史(处理历史需要进行叠加放置，用于保存所有处理历史)||

### 3级产品

3级产品采用[netCDF][1]文件格式，文件名采用如下命名规则

```txt
xxxxx[站点号]_xxxx[雷达编号]_yyyymmddHHMMSS[时间]_prodL3_vxxx[版本号].nc
```

产品变量包括

|变量名|含义|数据类型|数据种类|单位|缺省值|
|:--:|:---|:--:|:--:|:--:|:--:|
|**longitude**|观测点经度|double|标量|-180 ~ 180|NaN|
|**latitude**|观测点维度|double|标量|-90 ~ 90|NaN|
|**altitude**|观测点海拔|double|标量|米|NaN|
|**elevation_angle**|天顶角|double|0-90 (degree)|数组(time)|90|
|**azimuth_angle**|方位角|double|0-360 (degree)|数组(time)|0|
|**start_time**|开始时间|double|标量|[POSIX时间戳][2]|NaN|
|**stop_time**|结束时间|double|标量|[POSIX时间戳][2]|NaN|
|**time**|每个剖面起始时间|double|数组|[POSIX时间戳][2]|NaN|
|**height**|每个高度门距地面的高度|double|数组|米|NaN|
|**size_bin**|颗粒物半径|double|数组|micron|0|
|**shots**|累积脉冲个数|int32|标量||0|
|**vertical_resolution**|有效分辨率|double|标量|米|NaN|
|**aerosol_size_distribution**|颗粒物粒径分布(lnV(r)/lnN(r))|double|矩阵(time x height x size_bin)|μm^{3}*μm^{-2}|NaN|
|**aerosol_size_distribution_uncertainty**|颗粒物粒径分布(lnV(r)/lnN(r))不确定度|double|矩阵(time x height x size_bin)|μm^{3}*μm^{-2}|NaN|
|**PM1.0**|粒径小于1.0微米颗粒物质量浓度|double|矩阵(time x height)|μg*m^{-3}|NaN|
|**PM1.0_uncertainty**|粒径小于1.0微米颗粒物质量浓度不确定度|double|矩阵(time x height)|μg*m^{-3}|NaN|
|**PM2.5**|粒径小于1.0微米颗粒物质量浓度|double|矩阵(time x height)|μg*m^{-3}|NaN|
|**PM2.5_uncertainty**|粒径小于2.5微米颗粒物质量浓度不确定度|double|矩阵(time x height)|μg*m^{-3}|NaN|
|**PM10**|粒径小于10微米颗粒物质量浓度|double|矩阵(time x height)|μg*m^{-3}|NaN|
|**PM10_uncertainty**|粒径小于10微米颗粒物质量浓度不确定度|double|矩阵(time x height)|μg*m^{-3}|NaN|
|**number_concentration**|颗粒物数浓度|double|矩阵(time x height)|m^{-3}|NaN|
|**number_concentration_uncertainty**|颗粒物数浓度不确定度|double|矩阵(time x height)|m^{-3}|NaN|
|**mass_concentration**|颗粒物质量浓度|double|矩阵(time x height)|μg*m^{-3}|NaN|
|**mass_concentration_uncertainty**|颗粒物质量浓度不确定度|double|矩阵(time x height)|μg*m^{-3}|NaN|

文件全局属性包括
|属性名|属性含义|例子|
|:--:|:-------|:--:|
|product_level|产品等级|L3|
|instrument|设备名称|polarization lidar|
|instrument_ID|设备号|0601|
|location|站点名称|Beijing|
|location_ID|站点号|57494|
|data_collector|设备运行人员|Zhang Shan|
|data_collector_email|设备运行人员邮箱|xxx|
|PI|设备负责人员|Zhao Si|
|PI_email|设备负责人员邮箱|xxx|
|processor_name|处理软件名称|xxx|
|processor_version|处理软件版本|1.0|
|instrument_configuration_file|雷达配置文件|xxx.json|
|campaign_configuration_file|观测站配置文件|xxx.json|
|history|处理历史(处理历史需要进行叠加放置，用于保存所有处理历史)||

[1]: https://www.unidata.ucar.edu/software/netcdf/
[2]: https://en.wikipedia.org/wiki/Unix_time